{"version":3,"sources":["components/UI/Modal/MyModal.module.css","components/UI/Button/MyButton.module.css","components/UI/Loader/Loader.module.css","components/UI/Input/MyInput.module.css","components/UI/Select/MySelect.module.css","context/context.js","components/UI/Button/MyButton.jsx","components/UI/Navbar/Navbar.jsx","API/PostService.jsx","components/UI/Loader/Loader.jsx","hooks/useFetching.js","components/UI/Input/MyInput.jsx","components/UI/Select/MySelect.jsx","components/PostFilter.jsx","components/PostForm.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/Modal/MyModal.jsx","hooks/usePosts.js","utils/pages.js","components/UI/Pagination/Pagination.jsx","pages/Error.jsx","router/routs.js","pages/About.jsx","pages/Posts.jsx","hooks/useObserver.js","pages/PostIdPage.jsx","pages/Login.jsx","components/AppRouter.jsx","App.js","index.js"],"names":["module","exports","AuthContext","createContext","MyButton","children","props","className","classes","my_btn","Navbar","setIsAuth","useContext","onClick","localStorage","removeItem","to","PostService","limit","page","axios","get","params","_limit","_page","response","id","Loader","loader","useFetching","callback","useState","isLoading","setIsLoading","error","setError","a","message","MyInput","React","forwardRef","ref","my_input","MySelect","options","defaultValue","value","onChange","my_select","event","target","disabled","map","option","name","PostFilter","filter","setFilter","query","e","placeholder","sort","selectedSort","PostForm","create","title","body","post","setPost","type","preventDefault","newPost","Date","now","PostItem","router","useHistory","push","remove","PostList","posts","length","TransitionGroup","index","CSSTransition","timeout","classNames","number","MyModal","visible","setVisible","rootClasses","my_modal","active","join","my_modal_content","stopPropagation","usePosts","sortedPosts","useMemo","b","localeCompare","useSortedPosts","toLocaleLowerCase","includes","getPageCount","totalCount","Math","ceil","Pagination","totalPages","changePage","pagesArray","result","i","getPagesArray","p","privateRoutes","path","component","exact","setPosts","modal","setModal","sortedAndSearchPosts","setTotalPages","setPage","lastElement","useRef","getAll","data","headers","fetchPosts","isPostsLoading","postError","canLoad","observer","useEffect","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","style","height","background","display","justifyContent","marginTop","useParams","comments","setComments","getById","fetchPostById","getCommentsByPostId","fetchComments","isComLoading","marginBottom","comm","email","publicRoutes","color","on","onSubmit","setItem","AppRouter","isAuth","route","App","getItem","Provider","basename","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d743855.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"my_modal\":\"MyModal_my_modal__oIvQ5\",\"active\":\"MyModal_active__2iorT\",\"my_modal_content\":\"MyModal_my_modal_content__2qI0z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"my_btn\":\"MyButton_my_btn__2MR1o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1MjUl\",\"rotate\":\"Loader_rotate__3fyxQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"my_input\":\"MyInput_my_input__1vyva\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"my_select\":\"MySelect_my_select__YkqON\"};","import { createContext } from 'react'\n\n\n\nexport const AuthContext = createContext(null)","import React from 'react'\nimport classes from './MyButton.module.css'\n\nfunction MyButton({children, ...props}) {\n    return (\n        <button {...props} className={classes.my_btn}>\n            {children}\n        </button>\n    )\n}\n\nexport default MyButton\n","import React, { useContext } from 'react'\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from '../../../context/context';\nimport MyButton from '../Button/MyButton';\n\nexport const Navbar = () => {\n\n\tconst {setIsAuth} = useContext(AuthContext)\n\n\tconst logout = () => {\n        setIsAuth(false);\n        localStorage.removeItem(\"auth\");\n    };\n\n    return (\n        <div className=\"navbar\">\n\t\t\t<MyButton onClick={logout}>\n\t\t\t\tВыйти\n\t\t\t</MyButton>\n            <div className=\"navbar__links\">\n                <Link to=\"/about\">О сайте</Link>\n                <Link to=\"/posts\">Блог</Link>\n            </div>\n        </div>\n    )\n}\n","import axios from \"axios\";\n\nexport default class PostService {\n    static async getAll(limit = 10, page = 1) {\n\t\tconst response = await axios.get(\n\t\t\t\"https://jsonplaceholder.typicode.com/posts\", {\n\t\t\t\tparams:{\n\t\t\t\t\t_limit: limit,\n\t\t\t\t\t_page: page\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\treturn response;\n    }\n\n    static async getById(id) {\n\t\tconst response = await axios.get(\n\t\t\t\"https://jsonplaceholder.typicode.com/posts/\" + id\n\t\t);\n\t\treturn response;\n    }\n\n\tstatic async getCommentsByPostId(id){\n\t\tconst response = await axios.get(\n            `https://jsonplaceholder.typicode.com/posts/${id}/comments`\n        );\n        return response;\n\t}\n}\n","import React from 'react'\nimport classes from './Loader.module.css'\n\nconst Loader = () => {\n\treturn <div className={classes.loader}></div>;\n}\n\nexport default Loader\n\n","import { useState } from \"react\";\n\nexport const useFetching = (callback) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const fetching = async (...args) => {\n        try {\n            setIsLoading(true);\n            await callback(...args);\n        } catch (e) {\n            setError(e.message);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return [fetching, isLoading, error];\n};\n","import React from 'react'\nimport classes from './MyInput.module.css'\n\nconst MyInput = React.forwardRef((props, ref) => {\n    return (\n        <input ref={ref} className={classes.my_input} {...props} />\n    )\n})\n\nexport default MyInput\n","import React from 'react'\nimport classes from \"./MySelect.module.css\";\n\nexport const MySelect = ({options, defaultValue, value, onChange}) => {\n\treturn (\n        <select\n            className={classes.my_select}\n            value={value}\n            onChange={(event) => onChange(event.target.value)}\n        >\n            <option disabled value=\"\">\n                {defaultValue}\n            </option>\n            {options.map((option) => (\n                <option key={option.value} value={option.value}>\n                    {option.name}\n                </option>\n            ))}\n        </select>\n    );\n}\n","import React from 'react'\nimport MyInput from \"./UI/Input/MyInput\";\nimport { MySelect } from \"./UI/Select/MySelect\";\n\nexport const PostFilter = ({filter, setFilter}) => {\n\treturn (\n        <div className=\"search\">\n            <MyInput\n                value={filter.query}\n                onChange={(e) => setFilter({...filter, query: e.target.value})}\n                placeholder=\"Поиск...\"\n            />\n            <MySelect\n                className=\"my_select\"\n                value={filter.sort}\n                onChange={selectedSort => setFilter({...filter, sort: selectedSort})}\n                defaultValue=\"Сортировка \"\n                options={[\n                    { value: \"title\", name: \"По названию\" },\n                    { value: \"body\", name: \"По описанию\" },\n                ]}\n            />\n        </div>\n    );\n}\n","import React, {useState} from 'react'\nimport MyButton from \"./UI/Button/MyButton\";\nimport MyInput from \"./UI/Input/MyInput\";\n\nconst PostForm = ({create}) => {\n\n    const [post, setPost] = useState({ title: \"\", body: \"\" });\n\n    const addNewPost = (e) => {\n        e.preventDefault();\n        const newPost={\n            ...post, id: Date.now()\n        }\n        create(newPost)\n        setPost({ title: \"\", body: \"\" });\n    };\n\n    return (\n        <form>\n            <MyInput\n                value={post.title}\n                onChange={(e) =>\n                    setPost({ ...post, title: e.target.value })\n                }\n                type=\"text\"\n                placeholder=\"Название поста\"\n            />\n            <MyInput\n                value={post.body}\n                onChange={(e) => setPost({ ...post, body: e.target.value })}\n                type=\"text\"\n                placeholder=\"Описание поста\"\n            />\n            <MyButton onClick={addNewPost}>Создать пост</MyButton>\n        </form>\n    )\n}\n\nexport default PostForm\n","import React from 'react'\nimport { useHistory } from 'react-router';\nimport MyButton from \"./UI/Button/MyButton\";\n\nconst PostItem = (props) => {\n\tconst router = useHistory()\n\n\treturn (\n        <div className=\"post\">\n            <div className=\"post__content\">\n                <strong>{props.post.id}. {props.post.title}</strong>\n                <div>{props.post.body}</div>\n            </div>\n            <div className=\"post__btns\">\n                <MyButton onClick={() => router.push(`/posts/${props.post.id}`)}>\n\t\t\t\t\tОткрыть\n\t\t\t\t</MyButton>\n                <MyButton onClick={() => props.remove(props.post)}>\n\t\t\t\t\tУдалить\n\t\t\t\t</MyButton>\n            </div>\n        </div>\n    );\n}\n\nexport default PostItem\n","import React from 'react'\nimport { CSSTransition, TransitionGroup } from 'react-transition-group'\nimport PostItem from './PostItem'\n\nfunction PostList({posts, title, remove}) {\n\tif (!posts.length) {\n\t\treturn (\n\t\t\t<h3>Посты не найдены!</h3>\n\t\t)\n\t}\n    return (\n        <div className=\"main\">\n            <h2>{title}</h2>\n            <TransitionGroup>\n                {posts.map((post, index) => (\n                    <CSSTransition\n\t\t\t\t\t\tkey={post.id}\n\t\t\t\t\t\ttimeout={500}\n\t\t\t\t\t\tclassNames=\"post\"\n\t\t\t\t\t>\n                        <PostItem\n                            remove={remove}\n                            number={index + 1}\n                            post={post}\n                        />\n                    </CSSTransition>\n                ))}\n            </TransitionGroup>\n        </div>\n    );\n}\n\nexport default PostList\n","import React from 'react'\nimport classes from \"./MyModal.module.css\";\n\nexport const MyModal = ({children, visible, setVisible}) => {\n\n\tconst rootClasses = [classes.my_modal]\n\n\tif (visible) {\n\t\trootClasses.push(classes.active)\n\t}\n\n\treturn (\n\t\t<div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\n\t\t\t<div className={classes.my_modal_content} onClick={(e) => e.stopPropagation()}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { useMemo } from \"react\";\n\nexport const useSortedPosts = (posts, sort) => {\n\tconst sortedPosts = useMemo(() => {\n\t\tif (sort) {\n\t\t\treturn [...posts].sort((a, b) => a[sort].localeCompare(b[sort]))\n\t\t}\n\t\treturn posts\n\t}, [sort, posts])\n\n\treturn sortedPosts\n}\n\nexport const usePosts =(posts, sort, query) =>{\n\tconst sortedPosts = useSortedPosts(posts, sort)\n\tconst sortedAndSearchPosts = useMemo(() => {\n\t\treturn sortedPosts.filter(post => post.title.toLocaleLowerCase().includes(query))\n\t}, [query, sortedPosts])\n\n\treturn sortedAndSearchPosts\n}","export const getPageCount = (totalCount, limit) => {\n    return Math.ceil(totalCount / limit);\n};\n\nexport const getPagesArray = (totalPages) => {\n    let result = [];\n    for (let i = 0; i < totalPages; i++) {\n        result.push(i + 1);\n    }\n    return result;\n};\n","import React from 'react';\nimport {getPagesArray} from \"../../../utils/pages\";\n\nexport const Pagination = ({totalPages, page, changePage}) => {\n    let pagesArray = getPagesArray(totalPages);\n    return (\n        <div className=\"pagination\">\n            {pagesArray.map(p =>\n                <span\n                    onClick={() => changePage(p)}\n                    key={p}\n                    className={page === p ? 'page current' : 'page'}\n                >\n                    {p}\n                </span>\n            )}\n        </div>\n    );\n};\n","import React from 'react'\n\nexport const Error = () => {\n    return (\n        <div className=\"main\">\n            <h2 style={{color: 'red'}}>\n                Вы перешли на несуществующую страницу\n            </h2>\n        </div>\n    )\n}\n","import { About } from \"../pages/About\";\nimport { PostIdPage } from \"../pages/PostIdPage\";\nimport { Posts } from \"../pages/Posts\";\nimport { Error } from \"../pages/Error\";\nimport { Login } from \"../pages/Login\";\n\nexport const privateRoutes = [\n\t{path: '/about', component: About, exact: true},\n\t{path: '/posts', component: Posts, exact: true},\n\t{path: '/posts/:id', component: PostIdPage, exact: true},\n\t\n\t\n]\n\nexport const publicRoutes =[\n\t{path: '/error', component: Error, exact: true},\n\t{path: '/login', component: Login, exact: true}\n]","import React from 'react'\n\nexport const About = () => {\n    return (\n        <div className=\"main\">\n            <h2>\n                Это приложение создано в качестве освоения\n            </h2>\n        </div>\n    )\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { PostFilter } from \"../components/PostFilter\";\nimport PostForm from \"../components/PostForm\";\nimport PostList from \"../components/PostList\";\nimport MyButton from \"../components/UI/Button/MyButton\";\nimport { MyModal } from \"../components/UI/Modal/MyModal\";\nimport { usePosts } from \"../hooks/usePosts\";\n\nimport PostService from \"../API/PostService\";\nimport Loader from \"../components/UI/Loader/Loader\";\nimport { useFetching } from \"../hooks/useFetching\";\nimport { getPageCount } from \"../utils/pages\";\nimport { Pagination } from \"../components/UI/Pagination/Pagination\";\nimport { useObserver } from \"../hooks/useObserver\";\n\nexport function Posts() {\n    const [posts, setPosts] = useState([\n        { id: 1, title: \"Javascript 1\", body: \"Description full news\" },\n        { id: 2, title: \"Pyton 2\", body: \" full news\" },\n        { id: 3, title: \"Delphi 3\", body: \" news\" },\n    ]);\n\n    const [filter, setFilter] = useState({ sort: \"\", query: \"\" });\n    const [modal, setModal] = useState(false);\n    const sortedAndSearchPosts = usePosts(posts, filter.sort, filter.query);\n\n    const [totalPages, setTotalPages] = useState(0);\n    const [limit, setLimit] = useState(10);\n    const [page, setPage] = useState(1);\n\n\tconst lastElement = useRef()\n\t\n\n    const [fetchPosts, isPostsLoading, postError] = useFetching(\n        async (limit, page) => {\n            const response = await PostService.getAll(limit, page);\n            setPosts([...posts, ...response.data]);\n            const totalCount = response.headers[\"x-total-count\"];\n            setTotalPages(getPageCount(totalCount, limit));\n        }\n    );\n\n\tuseObserver(lastElement, page < totalPages, isPostsLoading, () =>{\n\t\tsetPage(page + 1)\n\t})\n\n    useEffect(() => {\n        fetchPosts(limit, page);\n    }, [page]);\n\n    const createPost = (newPost) => {\n        setPosts([...posts, newPost]);\n        setModal(false);\n    };\n\n    const removePost = (post) => {\n        setPosts(posts.filter((p) => p.id !== post.id));\n    };\n\n\tconst changePage = (page) => {\n        setPage(page);\n        fetchPosts(limit, page);\n    };\n\n    return (\n        <div className=\"main\">\n            <div className=\"search\">\n                <MyButton onClick={() => setModal(true)}>Создать пост</MyButton>\n                <MyButton onClick={fetchPosts}>Получить посты</MyButton>\n            </div>\n            <hr />\n            <MyModal visible={modal} setVisible={setModal}>\n                <PostForm create={createPost} />\n            </MyModal>\n            <PostFilter filter={filter} setFilter={setFilter} />\n            {postError && <h2>Произошла ошибка ${postError}</h2>}\n\n            <PostList\n                remove={removePost}\n                posts={sortedAndSearchPosts}\n                title=\"Список постов 1\"\n            />\n\t\t\t<div ref={lastElement} style={{height: 20, background: 'red'}}></div>\n\n            {isPostsLoading && (\n                <div\n                    style={{\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        marginTop: \"50px\",\n                    }}\n                >\n                    <Loader />\n                </div>\n            )}\n\n            <Pagination\n                page={page}\n                changePage={changePage}\n                totalPages={totalPages}\n            />\n        </div>\n    );\n}\n","import {useEffect, useRef} from 'react'\n\nexport const useObserver = (ref, canLoad, isLoading, callback) =>{\n\tconst observer = useRef()\n\tuseEffect(() => {\n\t\tif (isLoading) return;\n\t\tif (observer.current) observer.current.disconnect();\n\t\tlet cb = function (entries, observer) {\n\t\t\tif (entries[0].isIntersecting && canLoad) {\n\t\t\t\tcallback()\n\t\t\t}\n        };\n        observer.current = new IntersectionObserver(cb);\n        observer.current.observe(ref.current);\n\t}, [isLoading])\n}","import React, { useEffect, useState } from 'react'\nimport { useParams } from 'react-router';\nimport PostService from '../API/PostService';\nimport Loader from '../components/UI/Loader/Loader';\nimport { useFetching } from '../hooks/useFetching';\n\nexport const PostIdPage = () => {\n\n\tconst params = useParams()\n\tconst [post, setPost] = useState({})\n\tconst [comments, setComments] = useState([])\n\tconst [fetchPostById, isLoading] = useFetching(async(id) =>{\n\t\tconst response = await PostService.getById(id)\n\t\tsetPost(response.data)\n\t})\n\tconst [fetchComments, isComLoading] = useFetching(async(id) =>{\n\t\tconst response = await PostService.getCommentsByPostId(id)\n\t\tsetComments(response.data)\n\t})\n\t\n\tuseEffect(() => {\n\t\tfetchPostById(params.id)\n\t\tfetchComments(params.id)\n\t},[])\n\n\treturn (\n        <div className=\"main\">\n            {isLoading ? (\n                <Loader />\n            ) : (\n                <h2>\n                    {post.id}. {post.title}\n                </h2>\n            )}\n            <br />\n            <div>{post.body}</div>\n            <hr />\n            <h4 style={{marginBottom: 10}}>Комментарии</h4>\n            {isComLoading ? (\n                <Loader />\n            ) : (\n                <div>\n                    {comments.map((comm) => (\n                        <div className=\"comm\">\n\t\t\t\t\t\t\t<div key={comm.id} className=\"comm_header\">\n\t                            <h5>{comm.name}</h5>\n\t                            <h5>{comm.email}</h5>\n\t\t\t\t\t\t\t</div>\n                            <div className=\"comm_body\">{comm.body}</div>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n}\n","import React, { useContext } from 'react'\nimport MyButton from '../components/UI/Button/MyButton'\nimport MyInput from '../components/UI/Input/MyInput'\nimport { AuthContext } from '../context/context'\n\nexport const Login = () => {\n\n\tconst {setIsAuth} = useContext(AuthContext)\n\n\tconst login = event => {\n\t\tevent.preventDefault();\n\t\tsetIsAuth(true)\n\t\tlocalStorage.setItem('auth', 'true')\n\t}\n\n\treturn (\n        <div className=\"main\">\n            <h2>Страница для логина</h2>\n            <form on onSubmit={login}>\n                <MyInput\n                    type=\"text\"\n                    name=\"\"\n                    id=\"\"\n                    placeholder=\"Введите логин\"\n                />\n                <MyInput\n                    type=\"password\"\n                    name=\"\"\n                    id=\"\"\n                    placeholder=\"Введите пароль\"\n                />\n                <MyButton>Войти</MyButton>\n            </form>\n        </div>\n    );\n}\n","import React, {useContext} from 'react'\nimport {\n    Switch,\n    Route,\n    Redirect,\n} from \"react-router-dom\";\nimport { publicRoutes, privateRoutes } from \"../router/routs\";\nimport { AuthContext } from '../context/context';\nimport Loader from './UI/Loader/Loader';\n\nexport const AppRouter = () => {\n\tconst {isAuth,isLoading} = useContext(AuthContext)\n\n\tif (isLoading) {\n\t\treturn <Loader/>\n\t}\n\t\n    return isAuth ? (\n        <Switch>\n            {privateRoutes.map((route) => (\n                <Route\n                    component={route.component}\n                    path={route.path}\n                    exact={route.exact}\n\t\t\t\t\tkey={route.path}\n                />\n            ))}\n            <Redirect to=\"/posts\" />\n        </Switch>\n    ) : (\n        <Switch>\n            {publicRoutes.map((route) => (\n                <Route\n                    component={route.component}\n                    path={route.path}\n                    exact={route.exact}\n\t\t\t\t\tkey={route.path}\n                />\n            ))}\n            <Redirect to=\"/login\" />\n        </Switch>\n    );\n}\n","import React, { useEffect, useState } from \"react\";\nimport \"./styles/App.css\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Navbar } from \"./components/UI/Navbar/Navbar\";\nimport { AppRouter } from \"./components/AppRouter\";\nimport { AuthContext } from \"./context/context\";\n\nexport default function App() {\n  const [isAuth, setIsAuth] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"auth\")) {\n      setIsAuth(true);\n    }\n    setIsLoading(false);\n  }, []);\n  return (\n    <div className=\"app\">\n      <AuthContext.Provider\n        value={{\n          isAuth,\n          setIsAuth,\n          isLoading,\n        }}\n      >\n        <Router basename=\"/react-fund\">\n          <Navbar />\n          <AppRouter />\n        </Router>\n      </AuthContext.Provider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <App />,\n\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}